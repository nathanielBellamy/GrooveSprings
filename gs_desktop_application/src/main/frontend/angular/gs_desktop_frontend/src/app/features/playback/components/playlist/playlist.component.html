<fieldset class="gs_playlist">
  <legend class="gs_playlist_legend">
    Playlist
  </legend>
  <div class="gs_playlist_header">
    {{playlistName$ | async}}
    <span>
      <button (click)="updateCurrPlaylistTrackIdx(-1)">
        <
      </button>
      <button (click)="updateCurrPlaylistTrackIdx(1)">
        >
      </button>
    </span>
    <button (click)="handleClearPlaylistClick()">
      Clr. Playlist
    </button>
  </div>
  <div class="playlist_tracks">
    @for (track of playlistTracks$ | async; track track; let i = $index) {
      <div class="gs_playlist_track"
           [class.gs_playlist_current_track]="i === (currIdx$ | async)"
           (dblclick)="handleDblClick(i, track)">
        <div>
          {{i}}:
        </div>
        <div>
          {{track.title}}
        </div>
        <div>
          {{track.artists}}
        </div>
        <div>
          <!--            TODO: debug jackson serialization to make consistent-->
          {{(track.album || {title: 'foo'}).title || track.album}}
        </div>
        <div>
          {{track.audioCodec}}
        </div>
      </div>
    }
  </div>
</fieldset>
